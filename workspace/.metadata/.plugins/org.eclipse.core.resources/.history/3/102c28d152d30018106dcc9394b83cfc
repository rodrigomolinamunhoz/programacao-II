package exercicio1;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Scanner;

import exemplo.Carro;

public class Cadastro {

	public static void main(String[] args) {
		ArrayList<Imovel> bairro = new ArrayList<Imovel>();
		//Leitor do arquivo:
		try {
			FileReader fr = new FileReader("dados/carros.txt");
			BufferedReader br = new BufferedReader(fr);
			
			String linha = null;
			while ((linha = br.readLine()) != null) {
				garagem.add(new Carro(linha));
			}
			
			br.close();
			fr.close();
		} catch (IOException e) {
			System.out.println("Arquivo criado!");
		}
		
		//Programa
		Scanner leitor = new Scanner(System.in);
		int opcao = 0;
		do {
			listarMenu();

			try {
				opcao = Integer.parseInt(leitor.nextLine());
			} catch (NumberFormatException e) {
				opcao = 0;
				System.out.println("Entrada inválida!");
			}

			switch (opcao) {
			case 1:
				try {
					System.out.println("Digite o código do imóvel:");
					int codigo = Integer.parseInt(leitor.nextLine());
					System.out.println("Digite o tipo do imóvel:");
					String tipoImovel = leitor.nextLine();
					System.out.println("Digite o valor do imóvel:");
					double valorImovel = Double.parseDouble(leitor.nextLine());
					bairro.add(new Imovel(codigo, tipoImovel, valorImovel));
				} catch (NumberFormatException e) {
					System.out.println("Campo digitado inválido!");
				}
				break;
			case 2:
				for (Imovel imovel : bairro) {
					System.out.println("Código: " + imovel.getCodigo());
					System.out.println("Tipo:" + imovel.getTipoImovel());
					System.out.println("Valor: " + imovel.getValorImovel());
				}
				break;
			case 3:
				System.out.println("Digite o código do imóvel que deseja excluir:");
				int codigoRemover = Integer.parseInt(leitor.nextLine());

				Imovel imovelEncontrado = null;
				for (Imovel imovel : bairro) {
					if (imovel.getCodigo() == codigoRemover) {
						imovelEncontrado = imovel;
					}
				}

				if (imovelEncontrado != null) {
					bairro.remove(imovelEncontrado);
				}
				break;
			case 4:
				break;
			default:
				break;
			}
		} while (opcao != 4);
		leitor.close();
	}

	public static void listarMenu() {
		System.out.println("1 - Cadastrar imóvel");
		System.out.println("2 - Listar imóvel");
		System.out.println("3 - Remover imóvel");
		System.out.println("4 - Sair");
		System.out.print("> ");
	}
}
